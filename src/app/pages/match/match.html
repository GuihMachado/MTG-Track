<div class="relative w-screen h-screen bg-black overflow-hidden grid transition-all duration-300"
     [ngClass]="getGridCols(players.length)">

  @for (player of players; track i; let i = $index) {
    <div class="relative flex justify-center items-center border border-white/10 select-none transition-transform duration-500 overflow-hidden"
         [style.background-color]="player.color"
         [ngClass]="getPlayerSpan(i, players.length) + ' ' + getRotation(i, players.length)">


      <button (click)="updateLife(player, -1)"
              class="absolute left-0 top-0 h-full w-1/3 z-20 flex items-center justify-start pl-6 text-5xl text-white/30 active:bg-black/10 touch-manipulation outline-none">
        -
      </button>

      <div class="text-[6rem] md:text-[7rem] font-bold text-white drop-shadow-md z-10 pointer-events-none">
        {{ player.life }}
      </div>

      <button (click)="updateLife(player, 1)"
              class="absolute right-0 top-0 h-full w-1/3 z-20 flex items-center justify-end pr-6 text-5xl text-white/30 active:bg-black/10 touch-manipulation outline-none">
        +
      </button>
      
      
      @if (player.cmdDamage > 0) {
        <div class="absolute top-4 left-1/2 -translate-x-1/2 text-xl font-bold text-red-500 bg-white/80 rounded px-2 z-30">
            {{ player.cmdDamage }}
        </div>
      }

    </div>
  }

  <div (click)="openMenu()"
       class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 
              w-14 h-14 bg-amber-500 rounded-full border-[3px] border-white 
              flex items-center justify-center text-white text-xl font-bold shadow-lg z-50 cursor-pointer 
              active:scale-95 transition-transform">
    M
  </div>

</div>